---
tags:
---


- Index : 책 맨 끝에 있는 찾아보기(색인) 
- DB에서 인덱스란 : 데이터 파일에 대한 색인.
	- 칼럼(또는 칼럼들)의 값과 해당 레코드가 저장된 주소를 키와 값의 쌍(Key-Value pair)으로 삼아 인덱스를 만들어 두는 것.

## 인덱스의 특성 - 정렬
- 찾아보기와 마찬가지로 인덱스에서도 **정렬**이 중요함.
	- 원하는 칼럼을 최대한 빠르게 찾아갈 수 있게, 칼럼의 값을 주어진 순서대로 미리 정렬해서 보관.
- 정렬로 인해 생기는 인덱스의 장단점
	- 데이터가 저장될 때마다 항상 값을 정렬해야 함.
		- 그래서 저장하는 과정이 복잡하고 느리지만, 이미 정렬돼 있어서 값을 찾을 때는 매우 빨리 원하는 값을 찾을 수 있음.
		- 인덱스가 많은 테이블은 INSERT, DELETE, UPDATE 문장의 처리가 느려짐. 하지만 이미 정렬된 인덱스를 가지고 있기 때문에 SELECT 문장은 매우 빠르게 처리할 수 있다. 
		- 인덱스는 데이터의 저장(INSERT, DELETE, UPDATE) 성능을 희생하고 그 대신 데이터의 읽기 속도를 높이는 기능. 
			- 때문에 테이블의 인덱스를 하나 추가할지 말지를 고려할 때는 데이터 저장 속도와 읽기 속도의 trade-off 관계를 생각해서 결정해야한다.
			- SELECT 쿼리의 where에 사용되는 칼럼이라고 전부 인덱스로 생성하면, 데이터 저장성능이 떨어지고 인덱스의 크기가 비대해져 역효과가 날 수 있다.

## 인덱스의 분류(MySQL 저자의 분류)
- 인덱스는 데이터를 관리하는 방식(알고리즘)과 중복 값의 허용 여부 등에 따라 여러 가지로 나눠볼 수 있다.
- 여기서(책) 키(Key)== 인덱스(Index)로 사용한다고 함.
### 역할에 따른 인덱스 분류
- 프라이머리 키(Primary key)
	- 그 레코드를 대표하는 칼럼의 값으로 만들어진 인덱스를 의미
	- 이 칼럼(혹은 칼럼의 조합)은 테이블에서 해당 레코드를 식별할 수 있는 기준 값이 되기 때문에 식별자라고도 부른다.
	- Primary key는 Null 값을 허용하지 않고, 또 중복 값을 허용하지 않는다.
- 보조 키(세컨더리 인덱스, Secondary key)
	- Primary key를 제외한 나머지 모든 인덱스는 세컨더리 인덱스로 분류한다. 
	- 유니크 인덱스는 프라이머리 키와 성격이 비슷하고 프라이머리 키를 대체해서 사용할 수도 있다고 해서 대체 키라고도 하는데 별도로 분류하기도 하고, 세컨더리 인덱스로 분류하기도 한다. 
### 데이터 저장 방식(알고리즘) 별 분류
- 많은 분류가 가능하지만 대표적으로는 아래와 같이 분류한다.
	- B-Tree 인덱스
		- 가장 일반적으로 사용되는 인덱스 알고리즘.
		- 유서 깊으며, 기술의 성숙도도 높음.
		- 칼럼의 값을 변형하지 않고 원래의 값을 이용해 인덱싱하는 알고리즘.
		- MySQL에는 위치 기반 검색을 지원하는 R-Tree 인덱스도 있는데, B-Tree의 응용 알고리즘으로 볼 수 있다. 
	- Hash 인덱스
		- 칼럼의 값으로 해시값을 계산해서 인덱싱하는 알고리즘.
		- 매우 빠른 검색을 지원한다.
		- 하지만 값을 변형해서 인덱싱하므로 전방(Prefix) 일치와 같이 값의 일부만 검색하거나 범위를 검색할 때는 해시 인덱스를 사용할 수 없다. 
		- 주로 메모리 기반 DB에서 많이 사용한다. 
- 최근에는 Fractal-Tree 인덱스나 로그 기반의 Merge-Tree 인덱스와 같은 알고리즘을 사용하는 DBMS도 개발되고 있다고 함.
### 데이터 중복 허용 여부로 분류
- 데이터 중복 허용 여부에 따라 
	- Unique 인덱스
	- Non-Unique 인덱스
- 인덱스가 유니크 한지 아닌지 여부는 옵티마이저에 있어서 중요한 문제가 된다. 
	- ex) 동등 조건(equal) 검색에서 하나의 데이터를 찾고 다음 데이터를 찾을 지 여부 결정 등.
	- 이외에도 유니크 인덱스로 인한 MySQL의 처리 방식의 변화나 차이점이 많다. 

### 기능별 인덱스 분류
- 전문 검색용 인덱스
- 공간 검색용 인덱스
- 이외에 더 많은 기능 분류가 있을 수 있지만 MySQL에서는 상기의 기능 분류로 충분

### InnoDB 인덱스 페이지의 구조
[출처](https://lkic1625.github.io/database/innoDB_index_page/)