---
aliases:
  - 스택 프레임
tags:
  - Stack_Frame
  - stack
  - Call_stack
---
# Stack Frame란?
- 함수 호출과 관련된 실행 컨텍스트를 저장하며(나타내며), 호출된 함수의 [[로컬 변수]], [[매개 변수]], 반환 주소 등을 저장하는 단위.
- 즉, [[Call Stack(Memory)|call stack]]의 저장 단위라고 볼 수 있다.
- 스택 프레임이라는 개념은, ([[Call Stack(Memory)|call stack]]과 마찬가지로) CS 영역 전체에서 일반적으로 사용되는 개념이다.

## 함수 프롤로그, 함수 에필로그
- 함수 프롤로그는 함수가 호출될 때 스택 프레임을 구성하는 작업을 말한다.
	- 이 작업은 함수의 매개변수와 지역 변수를 스택에 할당하고, 반환 주소를 저장하는 등의 작업을 포함한다.
- 함수 에필로그는 함수 실행이 끝나고 처음 지점으로 돌아가기 위해 스택 프레임을 복원하는 작업을 말한다.
	- 이 작업은 스택에서 지역 변수와 매개변수를 제거하고, 반환 주소를 로드하여 [[제어]]를 호출자에게 반환하는 등의 작업을 포함한다.
- 함수 프롤로그와 에필로그는 주로 저수준 프로그래밍 언어나 컴파일러 내부에서 사용되는 개념이다.
	- 자바와 같은 고수준의 언어에서는 이러한 저수준의 메모리 관리 작업이 대부분 추상화되어 있다.
		- 그러나 자바의 [[JVM]] 내부에서는 이러한 개념이 적용된다. 
		- JVM은 자바 바이트 코드를 실행할 때 각 메서드 호출에 대해 스택 프레임을 생성하고 관리한다.
		- 이 과정에서 함수 프롤로그와 에필로그와 유사한 작업이 수행된다.

## 연관 개념
- ESP와 EBP
	- ESP(Extended Stack Pointer)
		- 현재 스택의 최상단 주소 값을 저장하고 있는 레지스터
			- 스택의 주소는 높은 값에서 낮은 주소로 할당되므로, 최상단의 주소는 가장 큰 값이 아니라 가장 작은 값이 됨.
	- EBP(Extended Base Pointer)
		- 현재 스택 프레임의 베이스 주소를 담는 포인터
	- 다만 상기 두 개념은 (함수 프롤로그나 함수 에필로그와 마찬가지로) 저수준의 언어 차원에서 주로 사용되는 개념. 
## 언어별 Stack Frame
- [[Stack Frame(java)]]